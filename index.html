<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Bot Hub | Deriv Advanced Trader</title>
    <style>
        :root {
            --bg: #0e1117; --sidebar: #161a25; --card: #1e222d;
            --accent: #2962ff; --green: #00ff88; --red: #ff4d4d; --text: #d1d4dc;
        }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; }
        
        /* Sidebar & Profile */
        nav { width: 280px; background: var(--sidebar); border-right: 1px solid #363c4e; display: flex; flex-direction: column; padding: 20px; }
        .logo { font-size: 22px; font-weight: bold; color: var(--accent); margin-bottom: 30px; }
        .nav-link { padding: 12px; color: #b2b5be; text-decoration: none; border-radius: 6px; margin-bottom: 5px; cursor: pointer; }
        .nav-link:hover, .active { background: var(--card); color: white; border-left: 4px solid var(--accent); }

        /* Main Content */
        main { flex: 1; padding: 20px; overflow-y: auto; }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px; }
        .stat-card { background: var(--card); padding: 20px; border-radius: 10px; border: 1px solid #363c4e; }
        
        /* Analysis & Trading */
        .work-area { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .analysis-box { background: var(--card); height: 550px; border-radius: 12px; overflow: hidden; border: 1px solid #363c4e; }
        .bot-controls { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #363c4e; }

        input, select { width: 100%; background: #131722; border: 1px solid #363c4e; color: white; padding: 12px; border-radius: 6px; margin: 8px 0; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-connect { background: var(--accent); color: white; }
        .btn-bot { background: #ffaa00; color: #000; }

        /* Contact Footer */
        .footer { margin-top: auto; padding-top: 20px; border-top: 1px solid #363c4e; font-size: 13px; }
    </style>
</head>
<body>

<nav>
    <div class="logo">TRADER PRO V1</div>
    <div class="nav-link active">Dashboard</div>
    <div class="nav-link">Bot Builder</div>
    <div class="nav-link">Market Analysis</div>
    
    <div style="background: rgba(41, 98, 255, 0.1); padding: 10px; border-radius: 8px; margin-top: 20px; font-size: 12px;">
        <p style="color: var(--accent); margin: 0;"><strong>Partner Status:</strong></p>
        <a href="https://track.deriv.com/_YourID" style="color: white;">Join via Affiliate Link</a>
    </div>

    <div class="footer">
        <p><strong>Admin Contact:</strong></p>
        <p>ðŸ“§ YourEmail@gmail.com</p>
        <p>ðŸ“ž 07960 27150</p>
        <p style="color: var(--green);">M-Pesa: 07960 27150</p>
    </div>
</nav>

<main>
    <div class="stats-grid">
        <div class="stat-card"><small>Balance</small><h2 id="balance">$0.00</h2></div>
        <div class="stat-card"><small>Account Type</small><h2 id="acc-type">Disconnected</h2></div>
        <div class="stat-card"><small>Live Price</small><h2 id="live-price" style="color: var(--green)">---</h2></div>
    </div>

    <div class="work-area">
        <div class="analysis-box">
            <iframe src="https://tradingview.binary.com/v2.1.0/main.html?symbol=R_100&theme=dark" width="100%" height="100%" style="border: none;"></iframe>
        </div>

        <div class="bot-controls">
            <h3>Configuration</h3>
            <select id="acc-selection">
                <option value="demo">Demo Account</option>
                <option value="real">Real Account (CR)</option>
            </select>
            <input type="password" id="api-token" placeholder="Paste API Token Here">
            <button class="btn btn-connect" onclick="connectDeriv()">Link My Account</button>
            
            <hr style="border: 0.5px solid #363c4e; margin: 20px 0;">
            
            <h3>Auto-Bot Settings</h3>
            <label>Stake Amount ($)</label>
            <input type="number" id="stake" value="10">
            <label>Martingale Factor</label>
            <input type="number" id="multiplier" value="2">
            
            <button class="btn btn-bot" id="bot-toggle" onclick="toggleAutoBot()">START AUTOMATIC BOT</button>
            <p id="bot-status" style="font-size: 12px; text-align: center; margin-top: 10px;"></p>
        </div>
    </div>
</main>

<script>
    let ws;
    let isBotActive = false;
    const APP_ID = 1089; // Replace with your registered APP ID

    function connectDeriv() {
        const token = document.getElementById('api-token').value;
        const type = document.getElementById('acc-selection').value;
        
        ws = new WebSocket(`wss://ws.binaryws.com/websockets/v3?app_id=${APP_ID}`);
        
        ws.onopen = () => ws.send(JSON.stringify({ authorize: token }));

        ws.onmessage = (msg) => {
            const res = JSON.parse(msg.data);
            
            if (res.msg_type === 'authorize') {
                const acc = res.authorize.account_list.find(a => type === 'demo' ? a.is_virtual === 1 : a.is_virtual === 0);
                if (acc) {
                    document.getElementById('acc-type').innerText = type.toUpperCase();
                    document.getElementById('balance').innerText = `$${acc.balance}`;
                    document.getElementById('balance').style.color = type === 'real' ? 'var(--red)' : 'var(--green)';
                    ws.send(JSON.stringify({ ticks: 'R_100', subscribe: 1 }));
                }
            }
            if (res.msg_type === 'tick') {
                document.getElementById('live-price').innerText = res.tick.quote;
            }
        };
    }

    function toggleAutoBot() {
        const btn = document.getElementById('bot-toggle');
        isBotActive = !isBotActive;
        btn.innerText = isBotActive ? "STOPPING BOT..." : "START AUTOMATIC BOT";
        btn.style.background = isBotActive ? "var(--red)" : "#ffaa00";
        document.getElementById('bot-status').innerText = isBotActive ? "Bot Scanning Market..." : "Bot Standby";
    }
</script>

</body>
</html>
